/* --- 1. Global Theme Variables & Application --- */
:root {
    --transition-speed: 0.4s;
}

body {
    transition: background var(--transition-speed) ease, color var(--transition-speed) ease;
}

/* --- 2. Theme Presets for Each Weather Condition --- */

/* --- DEFAULT / CLEAR --- */
.weather-clear.light-mode {
    --bg-primary: linear-gradient(to right, #56CCF2, #2F80ED);
    --bg-card: rgba(255, 255, 255, 0.7);
    --bg-input: rgba(255, 255, 255, 0.9);
    --text-primary: #1a202c;
    --text-secondary: #2d3748;
    --text-muted: #4a5568;
    --text-inverse: #ffffff;
    --border-color: rgba(0, 0, 0, 0.1);
    --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
}
.weather-clear.dark-mode {
    --bg-primary: linear-gradient(to right, #0f2027, #203a43, #2c5364);
    --bg-card: rgba(15, 32, 39, 0.8);
    --bg-input: rgba(44, 83, 100, 0.7);
    --text-primary: #e2e8f0;
    --text-secondary: #cbd5e0;
    --text-muted: #a0aec0;
    --text-inverse: #1a202c;
    --border-color: rgba(255, 255, 255, 0.1);
    --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.5);
}

/* --- CLOUDS --- */
.weather-clouds.light-mode, .weather-mist.light-mode, .weather-fog.light-mode {
    --bg-primary: linear-gradient(to right, #bdc3c7, #2c3e50);
    --bg-card: rgba(255, 255, 255, 0.7);
    --bg-input: rgba(255, 255, 255, 0.9);
    --text-primary: #1a202c;
    --text-secondary: #2d3748;
    --text-muted: #4a5568;
    --text-inverse: #ffffff;
    --border-color: rgba(0, 0, 0, 0.1);
    --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
}
.weather-clouds.dark-mode, .weather-mist.dark-mode, .weather-fog.dark-mode {
    --bg-primary: linear-gradient(to right, #434343, #000000);
    --bg-card: rgba(67, 67, 67, 0.8);
    --bg-input: rgba(0, 0, 0, 0.5);
    --text-primary: #f7fafc;
    --text-secondary: #e2e8f0;
    --text-muted: #cbd5e0;
    --text-inverse: #1a202c;
    --border-color: rgba(255, 255, 255, 0.1);
    --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.5);
}

/* --- RAIN --- */
.weather-rain.light-mode, .weather-drizzle.light-mode {
    --bg-primary: linear-gradient(to right, #4B79A1, #283E51);
    --bg-card: rgba(255, 255, 255, 0.6);
    --bg-input: rgba(255, 255, 255, 0.8);
    --text-primary: #1a202c;
    --text-secondary: #2d3748;
    --text-muted: #4a5568;
    --text-inverse: #ffffff;
    --border-color: rgba(0, 0, 0, 0.2);
    --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.3);
}
.weather-rain.dark-mode, .weather-drizzle.dark-mode {
    --bg-primary: linear-gradient(to right, #1a1a2e, #16213e, #0f3460);
    --bg-card: rgba(26, 26, 46, 0.8);
    --bg-input: rgba(15, 52, 96, 0.7);
    --text-primary: #90cdf4;
    --text-secondary: #bfdbfe;
    --text-muted: #dbeafe;
    --text-inverse: #1a202c;
    --border-color: rgba(144, 205, 244, 0.2);
    --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.5);
}

/* --- THUNDERSTORM --- */
.weather-thunderstorm.light-mode {
    --bg-primary: linear-gradient(to right, #373B44, #4286f4);
    --bg-card: rgba(255, 255, 255, 0.6);
    --bg-input: rgba(255, 255, 255, 0.8);
    --text-primary: #1a202c;
    --text-secondary: #2d3748;
    --text-muted: #4a5568;
    --text-inverse: #ffffff;
    --border-color: rgba(0, 0, 0, 0.2);
    --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.3);
}
.weather-thunderstorm.dark-mode {
    --bg-primary: linear-gradient(to right, #141e30, #243b55);
    --bg-card: rgba(20, 30, 48, 0.8);
    --bg-input: rgba(36, 59, 85, 0.7);
    --text-primary: #e0e7ff;
    --text-secondary: #c7d2fe;
    --text-muted: #a5b4fc;
    --text-inverse: #1a202c;
    --border-color: rgba(165, 180, 252, 0.2);
    --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.5);
}

/* --- SNOW --- */
.weather-snow.light-mode {
    --bg-primary: linear-gradient(to right, #e6e9f0, #eef1f5);
    --bg-card: rgba(255, 255, 255, 0.8);
    --bg-input: rgba(255, 255, 255, 0.9);
    --text-primary: #2d3748;
    --text-secondary: #4a5568;
    --text-muted: #718096;
    --text-inverse: #1a202c;
    --border-color: rgba(0, 0, 0, 0.1);
    --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
}
.weather-snow.dark-mode {
    --bg-primary: linear-gradient(to right, #536976, #292E49);
    --bg-card: rgba(83, 105, 118, 0.8);
    --bg-input: rgba(41, 46, 73, 0.7);
    --text-primary: #f7fafc;
    --text-secondary: #e2e8f0;
    --text-muted: #cbd5e0;
    --text-inverse: #1a202c;
    --border-color: rgba(255, 255, 255, 0.1);
    --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.5);
}

/* --- ATMOSPHERE (FOG, MIST, HAZE, ETC.) --- */
.weather-atmosphere.light-mode {
    --bg-primary: linear-gradient(to right, #8E9EAB, #EEF2F3);
    --bg-card: rgba(255, 255, 255, 0.7);
    --bg-input: rgba(255, 255, 255, 0.9);
    --text-primary: #1a202c;
    --text-secondary: #2d3748;
    --text-muted: #4a5568;
    --text-inverse: #ffffff;
    --border-color: rgba(0, 0, 0, 0.1);
    --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
}
.weather-atmosphere.dark-mode {
    --bg-primary: linear-gradient(to right, #4c1d95, #5b21b6);
    --bg-card: rgba(76, 29, 149, 0.8);
    --bg-input: rgba(91, 33, 182, 0.7);
    --text-primary: #f3e8ff;
    --text-secondary: #e9d5ff;
    --text-muted: #d8b4fe;
    --text-inverse: #1a202c;
    --border-color: rgba(255, 255, 255, 0.1);
    --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.5);
}

/* --- 3. Global Application of Variables --- */
body {
    background: var(--bg-primary);
    color: var(--text-primary);
}
.bg-white\/20, .bg-white\/10 {
    background-color: var(--bg-card);
    backdrop-filter: blur(12px);
    border: 1px solid var(--border-color);
}
.text-white { color: var(--text-primary) !important; }
.text-white\/80 { color: var(--text-secondary) !important; }
.text-white\/60 { color: var(--text-muted) !important; }
.text-blue-100 { color: var(--text-secondary) !important; }
.border-white\/20 { border-color: var(--border-color) !important; }
.shadow-xl { box-shadow: var(--shadow); }

/* --- 4. Interactive Elements --- */
input[type="text"] {
    background-color: var(--bg-input);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
}
input[type="text"]:focus {
    outline: none;
    border-color: var(--text-primary);
    box-shadow: 0 0 0 3px rgba(26, 32, 44, 0.1);
}
button[type="submit"] {
    background-color: var(--text-primary);
    color: var(--text-inverse);
    font-weight: 600;
}
button#geo-btn, #favorite-btn {
    background-color: var(--bg-card);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
}
/* Specific override for the favorite button */
#favorite-btn {
    background-color: transparent;
    border: none;
    color: var(--text-primary);
    transition: transform 0.2s ease, color 0.2s ease;
}
#favorite-btn:hover {
    transform: scale(1.1);
    color: var(--text-secondary);
}
#favorites-list button {
    background-color: var(--bg-input);
    color: var(--text-primary);
}

/* Custom Leaflet Marker Icon */
.custom-div-icon {
    background: transparent;
    border: none;
    text-align: center;
    line-height: 30px; /* Match iconSize height */
}